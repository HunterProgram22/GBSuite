{% extends 'GBFinance/base.html' %}

{% load humanize %}

{% block content %}
<head>
<style>

table {
    border: 2px black solid;
    width: 100%;
}

td, th {
    text-align: right;
    padding-left: 2px;
    padding-right: 2px;
}

.heading {
    text-align: left;
    width: auto;
}

.toprow, .bottomrow {
    border: 1px solid black;
}

@media(min-width:768px) {
#reportsheet {
    width: 700px;
}
}
</style>
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Quarter', 'Spending', 'Utilities', 'Savings'],
          ['{{ quarter_report }}', {{ currentquarter_report.0 }}, {{ currentquarter_report.1 }}, {{ currentquarter_report.3 }}],
          ['{{ lastquarter_report_name}}', {{ lastquarter_report.0 }}, {{ lastquarter_report.1 }}, {{ lastquarter_report.3 }}],
          ['{{ yearago_report }}', {{ yearagoquarter_report.0 }}, {{ yearagoquarter_report.1 }}, {{ yearagoquarter_report.3 }}],
        ]);

        var options = {
          chart: {
            title: 'Quarterly Comparison',
            subtitle: 'Report for {{ quarter_report }}',
          }
        };

        var chart = new google.charts.Bar(document.getElementById('columnchart_material'));

        chart.draw(data, options);
      }
    </script>
</head>

<body>
<h1>Quarterly Reports</h1>
<div id="searchform">
<form action="{% url 'GBFinancereports' %}" method="POST">{% csrf_token %}
<select name="quarter">
    <option value=''>--Select Quarter--</option>
    <option value='1/2017'>1st Quarter 2017</option>
    <option value='4/2016'>4th Quarter 2016</option>
    <option value='3/2016'>3rd Quarter 2016</option>
    <option value='2/2016'>2nd Quarter 2016</option>
    <option value='1/2016'>1st Quarter 2016</option>
    <option value='4/2015'>4th Quarter 2015</option>
    <option value='3/2015'>3rd Quarter 2015</option>
    <option value='2/2015'>2nd Quarter 2015</option>
    <option value='1/2015'>1st Quarter 2015</option>
    <option value='4/2014'>4th Quarter 2014</option>
    <option value='3/2014'>3rd Quarter 2014</option>
    <option value='2/2014'>2nd Quarter 2014</option>
    <option value='1/2014'>1st Quarter 2014</option>
    <option value='4/2013'>4th Quarter 2013</option>
    <option value='3/2013'>3rd Quarter 2013</option>
    <option value='2/2013'>2nd Quarter 2013</option>
    <option value='1/2013'>1st Quarter 2013</option>
</select>
<br>
<input type="submit">
</form>
</div>


<h2>The Kudela Partnership {{ quarter_report }} Report</h2>

<div id="reportsheet">
<p>A summary of the financial data for {{ quarter_report }} is as follows:</p>

<p>The Net Worth of the Kudela Partnership at the close of the quarter was:
   <b>${{ currentquarter_report.5 | intcomma}}</b>.</p>

<p>A comparison of spending and saving for {{ quarter_report }} as compared to {{ lastquarter_report_name }}
and {{ yearago_report }} is presented below. Please note that the numbers
are not inclusive of all categories from the monthly income statements. For specific
details please refer to the income statements page.</p>

<table>
<tr class='toprow'>
    <th class='heading'>Category</th>
    <th>{{ quarter_report }}</th>
    <th>{{ lastquarter_report_name }}</th>
    <th>{{ yearago_report }}</th>
</tr>
<tr>
    <td class='heading'>Personal Spending</td>
    <td>$&nbsp;{{ currentquarter_report.0 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.0 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.0 | intcomma }}</td>
</tr>
<tr>
    <td class='heading'>Utilities</td>
    <td>$&nbsp;{{ currentquarter_report.1 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.1 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.1 | intcomma }}</td>
</tr>
<tr>
    <td class='heading'>Loan Payments</td>
    <td>$&nbsp;{{ currentquarter_report.2 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.2 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.2 | intcomma }}</td>
</tr>
<tr>
    <td class='heading'>Total Savings</td>
    <td>$&nbsp;{{ currentquarter_report.3 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.3 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.3 | intcomma }}</td>
</tr>
<tr class='bottomrow'>
    <td class='heading'>Surplus/Deficit</td>
    <td>$&nbsp;{{ currentquarter_report.4 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.4 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.4 | intcomma }}</td>
</tr>

</table><br>

<div id="columnchart_material" style="width: 600px; height: 333px;"></div>

<p>A comparison of certain account balances for {{ quarter_report }}
as compared to {{ lastquarter_report_name }} and {{ yearago_report }} is presented below.</p>

<table>
<tr class='toprow'>
    <th class='heading'>Category</th>
    <th>{{ quarter_report }}</th>
    <th>{{ lastquarter_report_name }}</th>
    <th>{{ yearago_report }}</th>
</tr>
<tr>
    <td class='heading'>Net Worth</td>
    <td>$&nbsp;{{ currentquarter_report.5 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.5 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.5 | intcomma }}</td>
</tr>
<tr>
    <td class='heading'>Loan Balance</td>
    <td>$&nbsp;{{ currentquarter_report.6 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.6 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.6 | intcomma }}</td>
</tr>
<tr>
    <td class='heading'>Savings Balance</td>
    <td>$&nbsp;{{ currentquarter_report.7 | intcomma }}</td>
    <td>$&nbsp;{{ lastquarter_report.7 | intcomma }}</td>
    <td>$&nbsp;{{ yearagoquarter_report.7 | intcomma }}</td>
</tr>
</table>
</div>
</body>
{% endblock %}
